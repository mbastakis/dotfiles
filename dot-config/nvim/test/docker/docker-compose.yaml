# Docker Compose test file with intentional format issues

version: '3.8'

services:
  # Inconsistent indentation
  web:
    image: nginx:latest
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./html:/usr/share/nginx/html
    environment:
      - NODE_ENV=production
      - DEBUG=false

  # Missing health check
  api:
    build:  .
    ports:
      - "3000:3000"
    depends_on:
      - database
    environment:
      DATABASE_URL:  postgresql://user:password@database:5432/mydb
      API_KEY:  hardcoded-api-key-12345

  # Very long line
  database:
    image: postgres:15
    environment: {POSTGRES_USER: admin, POSTGRES_PASSWORD: password123, POSTGRES_DB: myapp, POSTGRES_INITDB_ARGS: "--encoding=UTF8 --locale=en_US.utf8"}
    volumes:
      - db_data:/var/lib/postgresql/data

  # Missing resource limits
  redis:
    image:redis:alpine
    ports:
      - "6379:6379"

  # Inconsistent spacing
  worker:
    build:
      context:  .
      dockerfile:  Dockerfile.worker
    depends_on:
      - redis
      - database
    environment:
      - REDIS_URL=redis://redis:6379
      - WORKER_THREADS=  4

volumes:
  db_data:
