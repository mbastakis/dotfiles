{
  "$schema": "https://opencode.ai/config.json",
  "theme": "catppuccin",
  "autoshare": false,
  "share": "manual",
  "autoupdate": true,
  "provider": {
    "amazon-bedrock": {
      "models": {
        "anthropic.claude-opus-4-5-20251101-v1:0": {
          "name": "Claude Opus 4.5 (Bedrock)"
        }
      }
    }
  },
  "mcp": {
    // "snap-happy": {
    //   "type": "local",
    //   "command": [
    //     "npx",
    //     "@mariozechner/snap-happy"
    //   ],
    //   "environment": {
    //     "SNAP_HAPPY_SCREENSHOT_PATH": "${HOME}/Screenshots"
    //   }
    // },
    // "context7": {
    //   "type": "local",
    //   "command": [
    //     "npx",
    //     "-y",
    //     "@upstash/context7-mcp"
    //   ]
    // },
    // "mcp-obsidian": {
    //   "type": "local",
    //   "command": ["uvx", "mcp-obsidian"],
    //   "environment": {
    //     "OBSIDIAN_API_KEY": "${OBSIDIAN_API_KEY}",
    //     "OBSIDIAN_HOST": "127.0.0.1",
    //     "OBSIDIAN_PORT": "27124"
    //   }
    // },
    // "sequential-thinking": {
    //   "type": "local",
    //   "command": [
    //     "npx",
    //     "-y",
    //     "@modelcontextprotocol/server-sequential-thinking"
    //   ]
    // },
  },
  "permission": {
    "edit": "allow",
    "bash": {
      // === DENY: Dangerous commands ===
      // These should never run without explicit user action outside OpenCode
      "rm -rf /": "deny",
      "rm -rf /*": "deny",
      "sudo": "deny",
      "sudo *": "deny",
      "su": "deny",
      "su *": "deny",
      "chmod 777 *": "deny",
      "chown": "deny",
      "chown *": "deny",
      // === ALLOW: OpenCode config access ===
      "cat ~/.config/opencode/*": "allow",
      "ls ~/.config/opencode/*": "allow",
      "find ~/.config/opencode -name '*.md'": "allow",
      "~/.config/opencode/cache/cache-helper.sh *": "allow",
      "~/.config/opencode/logs/session-logger.sh *": "allow",
      "mkdir -p ~/.config/opencode/metrics/*": "allow",
      // === ALLOW: Safe text processing ===
      "sort": "allow",
      "sort *": "allow",
      "grep": "allow",
      "grep *": "allow",
      "head": "allow",
      "head *": "allow",
      "tail": "allow",
      "tail *": "allow",
      "wc": "allow",
      "wc *": "allow",
      "cut": "allow",
      "cut *": "allow",
      "sed": "allow",
      "sed *": "allow",
      "awk": "allow",
      "awk *": "allow",
      "tr": "allow",
      "tr *": "allow",
      "uniq": "allow",
      "uniq *": "allow",
      "xargs": "allow",
      "xargs *": "allow",
      "echo": "allow",
      "echo *": "allow",
      "eza": "allow",
      "eza *": "allow",
      "date": "allow",
      "date *": "allow",
      // === ALLOW: File operations (for crawlers/general use) ===
      "mkdir": "allow",
      "mkdir *": "allow",
      "ls": "allow",
      "ls *": "allow",
      "du": "allow",
      "du *": "allow",
      "cat": "allow",
      "cat *": "allow",
      // === ALLOW: Development tools ===
      "uvx": "allow",
      "uvx *": "allow",
      "python": "allow",
      "python *": "allow",
      "node": "allow",
      "node *": "allow",
      "npm": "ask",
      "npm *": "ask",
      "bun": "ask",
      "bun *": "ask",
      // === ALLOW: Git read-only (safe) ===
      "git status": "allow",
      "git status *": "allow",
      "git diff": "allow",
      "git diff *": "allow",
      "git log": "allow",
      "git log *": "allow",
      "git show": "allow",
      "git show *": "allow",
      "git rev-parse": "allow",
      "git rev-parse *": "allow",
      "git branch": "allow",
      "git branch *": "allow",
      "git remote": "allow",
      "git remote *": "allow",
      "git ls-files": "allow",
      "git ls-files *": "allow",
      "git fetch": "allow",
      "git fetch *": "allow",
      // === ALLOW: Git staging/committing ===
      "git add": "allow",
      "git add *": "allow",
      "git commit": "allow",
      "git commit *": "allow",
      "git stash": "allow",
      "git stash *": "allow",
      "git restore": "allow",
      "git restore *": "allow",
      // === ASK: Git operations that modify history/remote ===
      "git checkout": "ask",
      "git checkout *": "ask",
      "git switch": "ask",
      "git switch *": "ask",
      "git merge": "ask",
      "git merge *": "ask",
      "git rebase": "ask",
      "git rebase *": "ask",
      "git reset": "ask",
      "git reset *": "ask",
      "git push": "ask",
      "git push *": "ask",
      "git pull": "ask",
      "git pull *": "ask",
      "git clean": "ask",
      "git clean *": "ask",
      "git rm": "ask",
      "git rm *": "ask",
      // === ASK: File modification ===
      "rm": "ask",
      "rm *": "ask",
      "mv": "ask",
      "mv *": "ask",
      "cp": "ask",
      "cp *": "ask",
      "chmod": "ask",
      "chmod *": "ask",
      // === ASK: Everything else ===
      "*": "ask"
    }
  },
  "agent": {
    "commit": {
      "description": "Git commit agent with pre-approved git commands",
      "mode": "subagent",
      "model": "amazon-bedrock/anthropic.claude-haiku-4-5-20251001-v1:0",
      "prompt": "{file:./agent/commit.md}",
      // v1.1.1: 'tools' is deprecated, use 'permission' for permissionable tools
      // Non-permissionable tools (read, glob, grep) are enabled by default
      // Use tools:false only to disable non-permissionable tools
      "tools": {
        "write": false,
        "patch": false,
        "read": false,
        "glob": false,
        "grep": false,
        "websearch": false,
        "codesearch": false,
        "todowrite": false,
        "todoread": false,
      },
      "permission": {
        "bash": {
          // Git commands - auto-approved
          "git *": "allow",
        },
        "edit": "deny",
        "webfetch": "deny",
        "skill": "deny",
        "external_directory": "deny"
      }
    },
    "web-crawler": {
      "description": "Crawl websites and extract content to ai-docs",
      "mode": "subagent",
      "model": "amazon-bedrock/anthropic.claude-haiku-4-5-20251001-v1:0",
      "temperature": 0.1,
      "prompt": "{file:./agent/web-crawler.md}",
      // v1.1.1: 'tools' is deprecated, use 'permission' for permissionable tools
      // Non-permissionable tools (read, glob, grep) are enabled by default
      "tools": {
        "glob": false,
        "grep": false,
        "patch": false,
        "todowrite": false,
        "todoread": false,
        "task": false
      },
      "permission": {
        // Security: explicit denylist for dangerous commands
        // Due to bug #6676, flags are stripped so "rm" matches "rm -rf ..."
        "bash": {
          // Filesystem destruction - deny
          "rm": "deny",
          "rm *": "deny",
          "rmdir": "deny",
          "rmdir *": "deny",
          // Permission changes - deny
          "chmod": "deny",
          "chmod *": "deny",
          "chown": "deny",
          "chown *": "deny",
          // Privilege escalation - deny
          "sudo": "deny",
          "sudo *": "deny",
          "su": "deny",
          "su *": "deny",
          // Code execution vectors - deny
          "eval": "deny",
          "eval *": "deny",
          "exec": "deny",
          "exec *": "deny",
          "source": "deny",
          "source *": "deny",
          "bash -c *": "deny",
          "sh -c *": "deny",
          "zsh -c *": "deny",
          // Network exfiltration - deny
          "curl": "deny",
          "curl *": "deny",
          "wget": "deny",
          "wget *": "deny",
          "nc": "deny",
          "nc *": "deny",
          "netcat": "deny",
          "netcat *": "deny",
          "ssh": "deny",
          "ssh *": "deny",
          "scp": "deny",
          "scp *": "deny",
          "rsync": "deny",
          "rsync *": "deny",
          // File operations - ask (crawler may need these)
          "mv": "ask",
          "mv *": "ask",
          "cp": "ask",
          "cp *": "ask",
          // Allowed commands for crawling
          "mkdir": "allow",
          "mkdir *": "allow",
          "uvx": "allow",
          "uvx *": "allow",
          "python": "allow",
          "python *": "allow",
          "ls": "allow",
          "ls *": "allow",
          "cat": "allow",
          "cat *": "allow",
          "du": "allow",
          "du *": "allow",
          "head": "allow",
          "head *": "allow",
          "tail": "allow",
          "tail *": "allow",
          "wc": "allow",
          "wc *": "allow",
          // Default - ask for anything else
          "*": "ask"
        },
        "skill": "allow",
        "webfetch": "allow",
        "edit": "deny",
        "external_directory": "deny"
      }
    },
    "web-researcher": {
      "description": "Research topics on the web and synthesize findings. Use this agent to answer questions, find information, compare technologies, or gather knowledge from web sources.",
      "mode": "subagent",
      "temperature": 0.5,
      "prompt": "{file:./agent/web-researcher.md}",
      // v1.1.1: 'tools' is deprecated, use 'permission' for permissionable tools
      // Non-permissionable tools (read, glob, grep) are enabled by default
      "tools": {
        "write": false,
        "edit": false,
        "patch": false,
        "glob": false,
        "grep": false,
        "task": false
      },
      "permission": {
        "bash": {
          // GitHub CLI - primary research tool
          "gh": "allow",
          "gh *": "allow",
          // crawl4ai for adaptive crawling
          "uvx": "allow",
          "uvx *": "allow",
          "python": "allow",
          "python *": "allow",
          // Safe read-only commands
          "cat": "allow",
          "cat *": "allow",
          "head": "allow",
          "head *": "allow",
          "tail": "allow",
          "tail *": "allow",
          "ls": "allow",
          "ls *": "allow",
          // Text processing
          "grep": "allow",
          "grep *": "allow",
          "sort": "allow",
          "sort *": "allow",
          "uniq": "allow",
          "uniq *": "allow",
          "wc": "allow",
          "wc *": "allow",
          // Deny everything else
          "*": "deny"
        },
        "skill": "allow",
        "webfetch": "allow",
        "edit": "deny",
        "external_directory": "deny"
      }
    }
  },
  "instructions": []
}
