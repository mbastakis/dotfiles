# Development environment specific values
# Inherits from values.yaml and overrides as needed

namespaces:
  # Application namespaces - enable injection for development
  injectionEnabled:
    - name: fiber-magenta-apprentice
      labels:
        istio-injection: enabled  # FIXED: Changed from disabled to enabled for mesh features
        environment: development
      annotations:
        purpose: "Multi-service application requiring mesh features"
        deployment.environment: "dev"
        note: "Istio 1.26.3 with CNI - sidecars will be injected automatically"

  # Infrastructure/Database namespaces - disable injection
  injectionDisabled:
    - name: keycloak
      labels:
        istio-injection: disabled
        environment: development
      annotations:
        purpose: "PostgreSQL database compatibility exception"
        deployment.environment: "dev"

  # Infrastructure namespaces
  infrastructure:
    - name: istio-ingress
      labels:
        name: istio-ingress
        environment: development
        istio-injection: disabled  # CORRECT: Gateway pods ARE the proxy, no sidecar injection needed
      annotations:
        purpose: "Istio gateway components namespace"
        deployment.environment: "dev"
        note: "Gateway v2 uses standalone gateway pods - they ARE the proxy (not sidecars)"
        istio-version: "1.26.3"

# Development specific settings
global:
  createNamespaces: true
  manageExistingNamespaces: true
