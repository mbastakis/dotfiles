# Global settings for corporate registry
global:
  imageRegistry: dockerhub.devops.telekom.de
  security:
    allowInsecureImages: true

langfuse:
  langfuse:
    nextauth:
      url: http://langfuse.internal.dev.aicc.aws.telekom.de
    ingress:
      enabled: true
      className: nginx
      hosts:
        - host: langfuse.internal.dev.aicc.aws.telekom.de
          paths:
            - path: /
              pathType: Prefix
    # Langfuse application images - using corporate registry (manual override since global.imageRegistry doesn't apply)
    web:
      image:
        repository: dockerhub.devops.telekom.de/langfuse/langfuse
    worker:
      image:
        repository: dockerhub.devops.telekom.de/langfuse/langfuse-worker

  # ClickHouse configuration for development - reduced resources for t3.medium cluster
  clickhouse:
    # Reduce replicas for dev environment
    replicaCount: 1
    # Use smaller resource preset that fits t3.medium nodes
    resourcesPreset: small # 500m CPU request, 512Mi memory request
    # Use corporate registry for ClickHouse images (global.imageRegistry will be prepended)
    image:
      repository: bitnami/clickhouse
    zookeeper:
      replicaCount: 1
      image:
        repository: bitnami/zookeeper

  # PostgreSQL configuration - using corporate registry (global.imageRegistry will be prepended)
  postgresql:
    image:
      repository: bitnami/postgresql
    auth:
      username: pdb
    primary:
      # Delete PVCs when the DB is deleted (for easy clean-up)
      # https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#persistentvolumeclaim-retention
      persistentVolumeClaimRetentionPolicy:
        enabled: true
        whenDeleted: Delete
    readReplicas:
      persistentVolumeClaimRetentionPolicy:
        enabled: true
        whenDeleted: Delete

  # Redis/Valkey configuration - using corporate registry (global.imageRegistry will be prepended)
  redis:
    image:
      repository: bitnami/valkey
    primary:
      persistentVolumeClaimRetentionPolicy:
        enabled: true
        whenDeleted: Delete
    replica:
      persistentVolumeClaimRetentionPolicy:
        enabled: true
        whenDeleted: Delete
    sentinel:
      persistentVolumeClaimRetentionPolicy:
        enabled: true
        whenDeleted: Delete

  # S3/MinIO configuration - using corporate registry (global.imageRegistry will be prepended)
  s3:
    image:
      repository: bitnami/minio
